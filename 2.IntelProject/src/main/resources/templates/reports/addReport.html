<!DOCTYPE html>
<html>
<head>
<title>Intel</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDABAwC6MT_fLJhaTFmVIluNKPp5bc-vms"></script>
<script type="text/javascript" src="/gmaps.js"></script>
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.3.0/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/examples.css" />  
<style>
    .jumbotron {
      background-color: #3a2b58; 
      color: #e5e4f4;
    }
    </style>
</head>
<body>
	<div>
    <th:block th:include="/_header2"></th:block>            
    </div>
    <div class="container mt-2 ">
       <form class="form-control jumbotron" action="#"
        th:action="@{/reports/save}"
        th:object="${report}"
         method="post">
         <h2 th:text="#{lang.repinp}">Report data input</h2>
            <div class="mb-3 mt-3 w-auto">
                <label class="form-check-label w-25" for="level" th:text="#{lang.level}">Action level</label>
                <input  type="number" th:field="*{level}" id="level"
                    placeholder="Level">
            </div>
            <div class="mb-3 mt-3 w-auto">
                <label class="form-check-label w-25" for="description" th:text="#{lang.desc}">Description</label>
                <input  type="text" th:field="*{description}" id="description"
                    placeholder="Description">
            </div>
            <h3 th:text="#{lang.coord}">Coordinates:</h3>
            <div class="mb-3 mt-3 w-auto">
                <label class="form-check-label w-25" for="lat" th:text="#{lang.lat}">Lattitude</label>
                <input  type="number" step="0.0000001" th:field="*{lat}" id="lat"
                    placeholder="Lattitude">
            </div>
            <div class="mb-3 mt-3 w-auto">
                <label class="form-check-label w-25" for="lng" th:text="#{lang.lng}" >Longitude</label>
                <input  type="number" step="0.0000001" th:field="*{lng}" id="lng"
                    placeholder="Longitude">
            </div>
            <a class="btn btn-primary" href="/reports" th:text="#{lang.showRep}">List of reports</a>
            <a>                           </a>
                <button type="submit" class="btn btn-primary" th:text="#{lang.addReport}" >Add</button>
             
            
                <p></p>
                <div id="map"> nera </div>
        </form>
    </div> 
    <script type="text/javascript"> 
    $(document).ready(function(){
      var map = new GMaps({
        el: '#map',
        lat: 55.2053185,
        lng: 23.9693398,
        zoom: 7
      });
      map.setContextMenu({
        control: 'map',
        options: [{
          title: 'Set Coordinates',
          name: 'add_marker',
          action: function(e){
            this.removeMarkers();
            var lat = e.latLng.lat();
            var lng = e.latLng.lng();

            this.addMarker({
              lat: lat,
              lng: lng,
              title: lat.toFixed(7) + ", " + lng.toFixed(7)
            });
            this.hideContextMenu();
            document.getElementById("lat").value = lat.toFixed(7);
            document.getElementById("lng").value = lng.toFixed(7);

          }
        }, {
          title: 'Center here',
          name: 'center_here',
          action: function(e){
            this.setCenter(e.latLng.lat(), e.latLng.lng());
          }
        }]
      });
      map.setContextMenu({
        control: 'marker',
        options: [{
          title: 'Center here',
          name: 'center_here',
          action: function(e){
            this.setCenter(e.latLng.lat(), e.latLng.lng());
          }
        }]
      });
      map.addControl({
          position: 'top_right',
          content: 'Geolocate',
          style: {
            margin: '5px',
            padding: '1px 6px',
            border: 'solid 1px #717B87',
            background: '#fff'
          },
          events: {
            click: function(){
              GMaps.geolocate({
                success: function(position){
                  map.setCenter(position.coords.latitude, position.coords.longitude);
                },
                error: function(error){
                  alert('Geolocation failed: ' + error.message);
                },
                not_supported: function(){
                  alert("Your browser does not support geolocation");
                }
              });
            }
          }
        });
    });
  </script>
	<script type="text/javascript">
			$(document).ready(function() {
   			 	$("#locales").change(function () {
       		 		var selectedOption = $('#locales').val();
        			if (selectedOption != ''){
          		  		window.location.replace('?lang=' + selectedOption);
        			}
    			});
			});
		</script>
    
   
</body>
</html>